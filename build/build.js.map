{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/core/Game.js","src/core/Stage.js","src/index.js"],"names":[],"mappings":"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","file":"build.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*jshint esnext: true */\r\nimport Stage from './Stage';\r\n\r\nclass Game{\r\n  constructor(idContainer, width, height, options = {}){\r\n\r\n    this.idContainer = idContainer;\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    if(options.fps) this.fps = options.fps;\r\n    else this.fps = -1;\r\n\r\n    if(options.tps) this.tps = options.tps;\r\n    else this.tps = 60;\r\n\r\n    if(options.initStage)  this.loadStage(options.initStage);\r\n    else this.currStage = new Stage();\r\n\r\n    this.renderer = PIXI.autoDetectRenderer(this.width, this.height, {backgroundColor : 0x000000});\r\n\r\n    this.then = Date.now();\r\n\r\n    switch (this.fps) {\r\n  \t\tcase this.tps:\r\n        this.frameInterval = 1000/this.fps;\r\n  \t\t\tthis.loop = this.simpleLoop;\r\n        this.delta = 0;\r\n  \t\t\tbreak;\r\n  \t\tcase -1:\r\n        this.ticksInterval = 1000/this.tps;\r\n        this.lag = 0;\r\n  \t\t\tthis.loop = this.fpsUnlimitedLoop;\r\n  \t\t  break;\r\n  \t\tdefault:\r\n        this.frameInterval = 1000/this.fps;\r\n        this.ticksInterval = 1000/this.tps;\r\n        this.thenAux = Date.now();\r\n        this.delta = 0;\r\n        this.lag = 0;\r\n  \t\t\tthis.loop = this.fpsLockedLoop;\r\n        break;\r\n  \t}\r\n\r\n    document.getElementById(this.idContainer).appendChild(this.renderer.view);\r\n  }\r\n\r\n  simpleLoop(){\r\n  \tthis.frame = window.requestAnimationFrame(this.loop.bind(this));\r\n  \tlet now = Date.now();\r\n  \tthis.delta = now - this.then;\r\n  \tif (this.delta > this.frameInterval) {\r\n  \t\tthis.update();\r\n  \t\t//updateInputs();\r\n  \t\tthis.render();\r\n  \t\tthis.then = now - (this.delta % this.frameInterval);\r\n  \t}\r\n  }\r\n\r\n  fpsUnlimitedLoop(){\r\n  \tthis.frame = window.requestAnimationFrame(this.loop.bind(this));\r\n  \tlet now = Date.now();\r\n  \tthis.lag += now - this.then;\r\n  \tthis.then = now;\r\n  \twhile(this.ticksInterval < this.lag){\r\n  \t\tthis.update();\r\n  \t\t//updateInputs();\r\n  \t\tthis.lag -= this.ticksInterval;\r\n  \t}\r\n  \tthis.render();\r\n  }\r\n\r\n  fpsLockedLoop(){\r\n  \tthis.frame = window.requestAnimationFrame(this.loop.bind(this));\r\n  \tlet now = Date.now();\r\n  \tthis.lag += now - this.then;\r\n  \tthis.delta = now - this.thenAux;\r\n  \tthis.then = now;\r\n  \twhile(this.ticksInterval < this.lag){\r\n  \t\tthis.update();\r\n  \t\t//updateInputs();\r\n  \t\tthis.lag -= this.ticksInterval;\r\n  \t}\r\n  \tif (this.delta > this.frameInterval) {\r\n  \t\tthis.render();\r\n  \t\tthis.thenAux = now - (this.delta % this.frameInterval);\r\n  \t}\r\n  }\r\n\r\n  update(){\r\n    this.currStage.update();\r\n  }\r\n\r\n  render(){\r\n    this.renderer.render(this.currStage.renderContainer);\r\n  }\r\n\r\n  loadStage(stage){\r\n    this.currStage = stage;\r\n    this.currStage.init();\r\n  }\r\n\r\n  start(){\r\n    this.loop();\r\n  }\r\n\r\n  stop(){\r\n    window.cancelAnimationFrame(this.frame);\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = Game;\r\n","/*jshint esnext: true */\r\n\r\nclass Stage{\r\n  constructor(game, init, update){\r\n    this.game = game;\r\n    this.container.render();\r\n    this.renderContainer = new PIXI.Container();\r\n    this.init = init;\r\n    this.stageUpdate = update;\r\n  }\r\n\r\n  init(){\r\n\r\n  }\r\n\r\n  update(){\r\n    this.container.update();\r\n    this.stageUpdate();\r\n  }\r\n}\r\n\r\nmodule.exports = Stage;\r\n","/*jshint esnext: true */\r\n\r\nimport Game from './core/Game';\r\nimport Stage from './core/Stage';\r\n\r\nggf = {};\r\nggf.Game = Game;\r\nggf.Stage = Stage;\r\n"]}